# Step 2: 十神計算

## 任務

根據日主計算四柱各干的十神關係。此步驟為純計算，需遵循標準十神定義。

## 輸入

```
前一步輸出: {step1_output}
日主: {day_master}
```

## 處理流程

1. 以日主為基準，計算各天干的十神
2. 計算各地支藏干對日主的十神
3. 統計十神分布

## 十神對照表

以日主五行為基準：

| 關係 | 陽見陽/陰見陰 | 陽見陰/陰見陽 |
|------|---------------|---------------|
| 同我 | 比肩 | 劫財 |
| 我生 | 食神 | 傷官 |
| 我剋 | 偏財 | 正財 |
| 剋我 | 七殺 | 正官 |
| 生我 | 偏印 | 正印 |

## 輸出格式 (JSON)

```json
{
  "step": 2,
  "task": "十神計算",
  "日主": "X",
  "日主五行": "X",
  "日主陰陽": "陽|陰",
  "十神分布": {
    "天干": {
      "年干": {"gan": "X", "shishen": "XX"},
      "月干": {"gan": "X", "shishen": "XX"},
      "日干": {"gan": "X", "shishen": "日主"},
      "時干": {"gan": "X", "shishen": "XX"}
    },
    "藏干": {
      "年支": [{"stem": "X", "shishen": "XX"}],
      "月支": [],
      "日支": [],
      "時支": []
    }
  },
  "十神統計": {
    "比肩": 0, "劫財": 0,
    "食神": 0, "傷官": 0,
    "偏財": 0, "正財": 0,
    "七殺": 0, "正官": 0,
    "偏印": 0, "正印": 0
  },
  "observations": [
    "日主 X 為 Y行 Z（陽/陰）",
    "年干 A 對日主為 B",
    "十神以 C 最多"
  ],
  "applied_rules": [],
  "confidence": 1.0
}
```

## 規則

### 必須遵守

1. **十神計算必須遵循標準公式** — 不可自行發明十神關係
2. **日干固定為「日主」** — 不計入十神統計
3. **藏干十神需計入統計** — 但權重需標註（本氣/中氣/餘氣）

### observations 撰寫規範

只描述結構性事實：

- ✅ "日主丙火為陽火"
- ✅ "年干甲木對日主為偏印"
- ✅ "十神以比劫最多（3個）"
- ✅ "無正官星透出天干"
- ❌ "比劫多則兄弟緣厚"（這是解讀）
- ❌ "無官殺則缺乏約束"（這是解讀）

## 禁止事項

- ❌ 禁止從案例故事反推規則
- ❌ 禁止在 observations 中加入任何吉凶判斷
- ❌ 禁止引用 rules/ 目錄外的規則
- ❌ 禁止錯誤計算十神關係
